<div class="auth-wrapper">
  <div class="auth-container" [ngClass]="{ 'right-panel-active': isSignUp }">

    <!-- Sign Up -->
    <div class="form-container sign-up-container">
      <form [formGroup]="signupForm" (ngSubmit)="onSignup()">
        <h2>Create Account</h2>

        <div class="input-group">
          <i class="fas fa-user"></i>
          <input type="text" placeholder="Name" formControlName="name" />
        </div>
        <div class="input-group">
          <i class="fas fa-envelope"></i>
          <input type="email" placeholder="Email" formControlName="email" />
        </div>
        <div class="input-group">
          <i class="fas fa-phone"></i>
          <input type="tel" placeholder="Mobile Number" formControlName="mobile" />
        </div>
        <div class="input-group">
          <i class="fas fa-lock"></i>
          <input type="password" placeholder="Password" formControlName="password" />
        </div>

        <button type="submit" class="btn-primary">SIGN UP</button>
      </form>
    </div>

    <!-- Sign In (Email) -->
    <div class="form-container sign-in-container email-signin" [class.fade-out]="isMobileSignin"
      [class.fade-in]="!isMobileSignin">
      <form [formGroup]="signinForm" (ngSubmit)="onSignin()">
        <h2>Sign in to Techmaark!</h2>

        <div class="input-group">
          <i class="fas fa-envelope"></i>
          <input type="email" placeholder="Email" formControlName="email" />
        </div>
        <div class="input-group">
          <i class="fas fa-lock"></i>
          <input type="password" placeholder="Password" formControlName="password" />
        </div>

        <button type="submit" class="btn-primary full-btn">SIGN IN</button>
        <button type="button" class="btn-outline alt-login full-btn" (click)="toggleMobileSignin($event)">
          <i class="fas fa-phone"></i> Sign in with Mobile
        </button>
      </form>
    </div>

    <!-- Sign In (Mobile OTP) -->
    <div class="form-container sign-in-container mobile-signin" [class.fade-in]="isMobileSignin"
      [class.fade-out]="!isMobileSignin">

      <!-- OTP request form -->
      <form [formGroup]="mobileSigninForm" (ngSubmit)="onSendOtp()" *ngIf="!otpSent">
        <h2>Sign in with Mobile</h2>

        <div class="input-group">
          <i class="fas fa-phone"></i>
          <input type="tel" placeholder="Mobile Number" formControlName="mobile" />
        </div>

        <button type="submit" class="btn-primary full-btn">Send OTP</button>
        <button type="button" class="btn-outline alt-login full-btn" (click)="toggleMobileSignin($event)">
          <i class="fas fa-envelope"></i> Back to Email Login
        </button>
      </form>

      <!-- OTP verify form -->
      <form [formGroup]="otpForm" (ngSubmit)="onVerifyOtp()" *ngIf="otpSent">
        <h2>Enter OTP</h2>

        <div class="input-group">
          <i class="fas fa-key"></i>
          <input type="text" placeholder="Enter OTP" formControlName="otp" />
        </div>

        <button type="submit" class="btn-primary full-btn">Verify OTP</button>
        <button type="button" class="btn-outline alt-login full-btn" (click)="toggleMobileSignin($event)">
          <i class="fas fa-envelope"></i> Back to Email Login
        </button>
      </form>

      <!-- âœ… keep reCAPTCHA container always in DOM -->
      <div id="recaptcha-container"></div>
    </div>

    <!-- Overlay Panels -->
    <div class="overlay-container">
      <div class="overlay">
        <div class="overlay-panel overlay-left">
          <h2>Welcome Back!</h2>
          <p>To keep connected with us please login with your personal info</p>
          <button type="button" class="btn-outline overlay-btn" (click)="isSignUp = false">SIGN IN</button>
        </div>
        <div class="overlay-panel overlay-right">
          <h2>Hello, Friend!</h2>
          <p>Enter your personal details and start your journey with us</p>
          <button type="button" class="btn-outline overlay-btn" (click)="isSignUp = true">SIGN UP</button>
        </div>
      </div>
    </div>

  </div>
</div>
<app-fashion-header [style_2]="true"></app-fashion-header>

<main>
   <section class="profile__area pt-120 pb-120">
      <div class="container">
         <div class="profile__inner p-relative">

            <!-- shapes (optional decorative images) -->
            <div class="profile__shape">
               <img class="profile__shape-1" src="/assets/img/login/laptop.png" alt="">
               <img class="profile__shape-2" src="/assets/img/login/man.png" alt="">
               <img class="profile__shape-3" src="/assets/img/login/shape-1.png" alt="">
               <img class="profile__shape-4" src="/assets/img/login/shape-2.png" alt="">
               <img class="profile__shape-5" src="/assets/img/login/shape-3.png" alt="">
               <img class="profile__shape-6" src="/assets/img/login/shape-4.png" alt="">
            </div>

            <div class="row">
               <!-- Left Tabs -->
               <div class="col-xxl-4 col-lg-4">
                  <div class="profile__tab mr-40">
                     <nav>
                        <div class="nav nav-tabs tp-tab-menu flex-column" id="profile-tab" role="tablist">
                           <button class="nav-link active" id="nav-dashboard-tab" data-bs-toggle="tab"
                              data-bs-target="#nav-dashboard" type="button" role="tab" aria-controls="nav-dashboard"
                              aria-selected="true">
                              <span><i class="fa-regular fa-house"></i></span>Dashboard
                           </button>

                           <button class="nav-link" id="nav-profile-tab" data-bs-toggle="tab"
                              data-bs-target="#nav-profile" type="button" role="tab" aria-controls="nav-profile"
                              aria-selected="false">
                              <span><i class="fa-regular fa-user-pen"></i></span>Profile Info
                           </button>

                           <button class="nav-link" id="nav-address-tab" data-bs-toggle="tab"
                              data-bs-target="#nav-address" type="button" role="tab" aria-controls="nav-address"
                              aria-selected="false">
                              <span><i class="fa-light fa-location-dot"></i></span>Addresses
                           </button>

                           <button class="nav-link" id="nav-orders-tab" data-bs-toggle="tab"
                              data-bs-target="#nav-orders" type="button" role="tab" aria-controls="nav-orders"
                              aria-selected="false">
                              <span><i class="fa-light fa-clipboard-list-check"></i></span>My Orders
                           </button>

                           <button class="nav-link" id="nav-notifications-tab" data-bs-toggle="tab"
                              data-bs-target="#nav-notifications" type="button" role="tab"
                              aria-controls="nav-notifications" aria-selected="false">
                              <span><i class="fa-regular fa-bell"></i></span>Notifications
                           </button>

                           <button class="nav-link" id="nav-password-tab" data-bs-toggle="tab"
                              data-bs-target="#nav-password" type="button" role="tab" aria-controls="nav-password"
                              aria-selected="false">
                              <span><i class="fa-regular fa-lock"></i></span>Change Password
                           </button>
                        </div>
                     </nav>
                  </div>
               </div>

               <!-- Right Content -->
               <div class="col-xxl-8 col-lg-8">
                  <div class="profile__tab-content">
                     <div class="tab-content" id="profile-tabContent">

                        <!-- Dashboard -->
                        <div class="tab-pane fade show active" id="nav-dashboard" role="tabpanel"
                           aria-labelledby="nav-dashboard-tab">
                           <div class="profile__main">
                              <div class="profile__main-top pb-40">
                                 <div class="row align-items-center">
                                    <div class="col-md-6">
                                       <div class="profile__main-inner d-flex align-items-center">
                                          <div class="profile__main-thumb">
                                             <img [src]="user.avatar || '/assets/img/users/user-10.jpg'" alt="">
                                          </div>
                                          <div class="profile__main-content ms-3">
                                             <h4>Welcome, {{ user.name }}</h4>
                                             <p>You have {{ stats.totalOrders }} total orders, {{ stats.pending }}
                                                pending, {{ stats.canceled }} canceled.</p>
                                          </div>
                                       </div>
                                    </div>
                                    <div class="col-md-6 text-end">
                                       <a routerLink="/pages/login" class="tp-logout-btn" (click)="logout()">Logout</a>
                                    </div>
                                 </div>
                              </div>

                              <div class="row gx-3">
                                 <div class="col-md-3"
                                    *ngFor="let s of [{title:'Total Orders', value: stats.totalOrders},{title:'Pending Orders', value: stats.pending},{title:'Canceled Orders', value: stats.canceled},{title:'Reward Points', value: stats.rewardPoints || 0}]">
                                    <div
                                       class="profile__main-info-item text-center p-3 bg-white rounded shadow-sm mb-3">
                                       <h3 class="mb-2">{{ s.value }}</h3>
                                       <p class="mb-0">{{ s.title }}</p>
                                    </div>
                                 </div>
                              </div>
                           </div>
                        </div>

                        <!-- Profile Info -->
                        <div class="tab-pane fade" id="nav-profile" role="tabpanel" aria-labelledby="nav-profile-tab">
                           <div class="profile__info">
                              <h3 class="profile__info-title mb-3">Update Profile</h3>
                              <form (ngSubmit)="onUpdateProfile()" #infoForm="ngForm">
                                 <div class="row g-3">
                                    <div class="col-md-6">
                                       <input type="text" [(ngModel)]="user.name" name="fullName"
                                          placeholder="Full Name" class="form-control">
                                    </div>
                                    <div class="col-md-6">
                                       <input type="email" [(ngModel)]="user.email" name="email" placeholder="Email"
                                          class="form-control">
                                    </div>
                                    <div class="col-md-6">
                                       <input type="text" [(ngModel)]="user.phone" name="phone" placeholder="Phone"
                                          class="form-control">
                                    </div>
                                    <div class="col-md-6">
                                       <app-nice-select [options]="genderSelectOptions" name="Select Gender"
                                          [defaultCurrent]="user.genderIndex || 0" (onChange)="GenderChange($event)"
                                          placeholder="Select Gender">
                                       </app-nice-select>
                                    </div>
                                    <div class="col-12">
                                       <textarea [(ngModel)]="user.addressLine" name="addressLine" placeholder="Address"
                                          class="form-control"></textarea>
                                    </div>
                                    <div class="col-12 text-end">
                                       <button class="tp-btn">Update Profile</button>
                                    </div>
                                 </div>
                              </form>
                           </div>
                        </div>

                        <!-- Addresses -->
                        <div class="tab-pane fade" id="nav-address" role="tabpanel" aria-labelledby="nav-address-tab">
                           <div class="profile__address">
                              <div class="row">
                                 <div class="col-md-6 mb-3" *ngFor="let addr of addresses">
                                    <div class="profile__address-item p-3 border rounded">
                                       <h5>{{ addr.type }} Address <span *ngIf="addr.isDefault"
                                             class="badge bg-primary">Default</span></h5>
                                       <p>{{ addr.address }}, {{ addr.city }}, {{ addr.zip }}</p>
                                    </div>
                                 </div>
                              </div>
                           </div>
                        </div>

                        <!-- Orders -->
                        <div class="tab-pane fade" id="nav-orders" role="tabpanel" aria-labelledby="nav-orders-tab">
                           <div class="profile__ticket table-responsive">
                              <table class="table table-bordered align-middle">
                                 <thead class="table-light">
                                    <tr>
                                       <th>Order Id</th>
                                       <th>Product Title</th>
                                       <th>Status</th>
                                       <th>Action</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr *ngFor="let o of orders">
                                       <td>{{ o.id }}</td>
                                       <td>{{ o.title }}</td>
                                       <td>
                                          <span class="badge" [ngClass]="{
                              'bg-warning': o.status==='Pending',
                              'bg-success': o.status==='Resolved',
                              'bg-danger': o.status==='Canceled',
                              'bg-info': o.status==='On Hold'
                            }">{{ o.status }}</span>
                                       </td>
                                       <td>
                                          <button *ngIf="o.action==='Invoice'" class="btn btn-sm btn-primary"
                                             (click)="openInvoice(o)">Invoice</button>
                                          <button *ngIf="o.action==='Reply'" class="btn btn-sm btn-secondary"
                                             (click)="replyOrder(o)">Reply</button>
                                          <button *ngIf="o.action==='Status'" class="btn btn-sm btn-info"
                                             (click)="viewStatus(o)">Status</button>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                        </div>

                        <!-- Notifications -->
                        <div class="tab-pane fade" id="nav-notifications" role="tabpanel"
                           aria-labelledby="nav-notifications-tab">
                           <div class="profile__notification">
                              <h4>Notification Settings</h4>
                              <div *ngFor="let s of notificationSettings" class="form-check form-switch mb-2">
                                 <input class="form-check-input" type="checkbox" [id]="s.id" [(ngModel)]="s.enabled"
                                    name="{{ s.id }}">
                                 <label class="form-check-label" [for]="s.id">{{ s.label }}</label>
                              </div>
                           </div>
                        </div>

                        <!-- Change Password -->
                        <div class="tab-pane fade" id="nav-password" role="tabpanel" aria-labelledby="nav-password-tab">
                           <div class="profile__password">
                              <form (ngSubmit)="changePassword()" #pwdForm="ngForm">
                                 <div class="row g-3">
                                    <div class="col-md-4">
                                       <input type="password" [(ngModel)]="password.old" name="old_pass"
                                          placeholder="Old Password" class="form-control">
                                    </div>
                                    <div class="col-md-4">
                                       <input type="password" [(ngModel)]="password.new" name="new_pass"
                                          placeholder="New Password" class="form-control">
                                    </div>
                                    <div class="col-md-4">
                                       <input type="password" [(ngModel)]="password.confirm" name="con_new_pass"
                                          placeholder="Confirm Password" class="form-control">
                                    </div>
                                    <div class="col-12 text-end">
                                       <button class="tp-btn">Update Password</button>
                                    </div>
                                 </div>
                              </form>
                           </div>
                        </div>

                     </div>
                  </div>
               </div>

            </div>
         </div>
      </div>
   </section>
</main>

<app-footer [primary_style]="true"></app-footer>